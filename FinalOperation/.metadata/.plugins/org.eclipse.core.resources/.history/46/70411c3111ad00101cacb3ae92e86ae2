package controller;

import model.Employee;
import service.EmployeeService;
import service.impl.EmployeeServiceImpl;
import util.UiKit;

import javax.swing.*;

public class EmployeeLogin extends JFrame {
    private static final long serialVersionUID = 1L;
    private final JFrame back;
    private final EmployeeService svc = new EmployeeServiceImpl();
    private JTextField txtCode;

    public EmployeeLogin(JFrame back){
        this.back=back;
        setSize(380,200); setLocationRelativeTo(null); setLayout(null);
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        UiKit.attachClockToTitle(this,"員工登入");
        UiKit.createBackButton(this, e->{ back.setVisible(true); dispose(); });

        JLabel l1=new JLabel("員工編號：");
        l1.setBounds(40,60,80,24); add(l1);
        txtCode=new JTextField(); txtCode.setBounds(120,60,200,24); add(txtCode);
        JButton btn=new JButton("登入"); btn.setBounds(120,100,90,28); add(btn);

        btn.addActionListener(e->{
            Employee emp = svc.loginByCode(txtCode.getText().trim());
            if(emp==null){ JOptionPane.showMessageDialog(this,"員工不存在或已離職"); return; }
            new EmployeePanel(this, emp).setVisible(true);
            setVisible(false);
        });
    }
}
